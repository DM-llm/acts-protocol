# Claude 专用配置

> 本文件为 Claude Desktop 和 Claude API 提供专用优化配置。  
> 与 AGENTS.md 配合使用，提供更好的 Claude 体验。

---

## 扩展思考模式

在处理复杂任务时，使用扩展思考：

### 何时使用扩展思考

- 架构设计决策
- 复杂的调试问题
- 多模块交互分析
- 性能优化方案
- 安全性评估

### 思考结构

```
<thinking>
1. 问题分析
   - 核心问题是什么？
   - 涉及哪些模块？
   - 有哪些约束条件？

2. 方案探索
   - 方案 A：[描述] → 优势：[...] → 劣势：[...]
   - 方案 B：[描述] → 优势：[...] → 劣势：[...]
   - 方案 C：[描述] → 优势：[...] → 劣势：[...]

3. 决策
   - 推荐方案：[...]
   - 理由：[...]
   - 风险：[...]
   - 缓解措施：[...]
</thinking>
```

---

## 响应风格

### 代码解释

编写代码时，总是包含：

1. **架构说明**（为什么这样设计）
2. **实现代码**（带注释）
3. **权衡分析**（替代方案及优劣）
4. **注意事项**（潜在问题和边界情况）

### 示例格式

```markdown
## 方案：[简短标题]

### 架构考虑
- 为什么选择这个方案
- 对现有模块的影响
- 可扩展性和可维护性

### 实现
[代码块]

### 替代方案
- 方案 A：[优劣分析]
- 方案 B：[优劣分析]

### 注意事项
- 边界情况
- 性能考虑
- 安全性问题
```

---

## 上下文管理

### 优先级

1. **当前任务**（`context/current-task.md`）
2. **功能文档**（`context/docs/{领域}/{功能}/`）
3. **经验教训**（`context/docs/lessons/`）
4. **项目规则**（`context/steering/`）

### 上下文窗口优化

- 使用文件引用而非完整内容
- 只加载相关的 work-logs
- 优先加载最近的 lessons
- 懒加载详细文档

---

## 工作流程

### 1. 任务开始

```
1. 读取 context/current-task.md
2. 确认任务目标和约束
3. 搜索相关文档和 lessons
4. 询问澄清问题（如需要）
```

### 2. 任务执行

```
1. 使用扩展思考分析问题
2. 提出方案并解释权衡
3. 实现代码（带详细注释）
4. 验证解决方案
```

### 3. 任务完成

```
1. 创建 work-log 记录
2. 更新 current-task.md
3. 询问是否需要创建 lesson
4. 总结关键决策
```

---

## 特殊能力

### 文档生成

Claude 擅长生成结构化文档：

- 架构设计文档
- API 文档
- 技术方案
- PR 文档

### 代码审查

Claude 可以提供深度代码审查：

- 架构合理性
- 代码质量
- 潜在问题
- 改进建议

### 调试辅助

Claude 可以帮助调试：

- 分析错误日志
- 追踪问题根源
- 提出解决方案
- 预防类似问题

---

## 与 AGENTS.md 的关系

- **AGENTS.md**：核心协议定义（所有 AI 通用）
- **CLAUDE.md**：Claude 专用优化（扩展功能）

Claude 会同时遵循两个文件的规则，CLAUDE.md 提供额外的优化和指导。

---

## 版本信息

- **协议版本**：1.0
- **最后更新**：2026-01-31
- **兼容性**：Claude 3.5 Sonnet 及以上

---

## 使用说明

1. 将此文件放在项目根目录
2. 确保 AGENTS.md 也在根目录
3. Claude 会自动读取并遵循这两个文件
4. 无需额外配置
