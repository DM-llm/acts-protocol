# PR 文档规范

> Pull Request 文档编写指南

---

## 📋 PR 文档结构

### 基本信息

```markdown
# PR 标题

**分支**：feat/{功能名称}  
**类型**：功能开发 / Bug 修复 / 重构 / 文档  
**关联 Issue**：#{Issue 编号}

---

## 📝 变更说明

### 背景
为什么需要这个变更？解决什么问题？

### 方案
采用什么方案？为什么选择这个方案？

### 实现
具体实现了什么功能？

---

## 🔧 技术细节

### 架构变更
- 是否有架构调整？
- 影响哪些模块？

### API 变更
- 是否有 API 变更？
- 新增/修改/删除了哪些接口？

### 数据库变更
- 是否有数据库变更？
- 新增/修改了哪些表？

---

## ✅ 测试

### 测试用例
- [ ] 单元测试
- [ ] 集成测试
- [ ] 手动测试

### 测试结果
- 测试覆盖率：XX%
- 所有测试通过

---

## 📸 截图/演示

（如果是 UI 变更，提供截图或 GIF）

---

## 🚨 注意事项

- 是否有破坏性变更？
- 是否需要数据迁移？
- 是否需要更新文档？

---

## 📚 相关文档

- 设计文档：`#[[file:context/docs/{模块}/{功能}/01-{文档}.md]]`
- 工作日志：`#[[file:context/docs/{模块}/{功能}/work-logs/{日期}-{主题}.md]]`
```

---

## 🎯 PR 类型

### 功能开发（Feature）

**标题格式**：`feat: 添加{功能名称}`

**必须包含**：
- 功能描述
- 实现方案
- 测试结果
- 相关文档

### Bug 修复（Fix）

**标题格式**：`fix: 修复{问题描述}`

**必须包含**：
- Bug 描述
- 复现步骤
- 修复方案
- 测试验证

### 重构（Refactor）

**标题格式**：`refactor: 重构{模块名称}`

**必须包含**：
- 重构原因
- 重构方案
- 影响范围
- 测试验证

### 文档（Docs）

**标题格式**：`docs: 更新{文档名称}`

**必须包含**：
- 文档变更说明
- 变更原因

---

## 📝 编写流程

### 1. 创建 PR 文档

在 `context/reviews/{分支名}/` 创建文档：

```bash
mkdir -p context/reviews/feat-{功能名称}
touch context/reviews/feat-{功能名称}/01-initial-pr.md
```

### 2. 编写文档

按照上面的结构编写 PR 文档

### 3. Review 反馈

如果有 Review 反馈，创建新文档：

```bash
touch context/reviews/feat-{功能名称}/02-review-feedback.md
```

### 4. 提交 PR

将 PR 文档内容复制到 GitHub/GitLab PR 描述中

---

## ✅ 检查清单

提交 PR 前，确保：

- [ ] 代码符合团队规范
- [ ] 所有测试通过
- [ ] 已添加必要的注释
- [ ] 已更新相关文档
- [ ] PR 文档完整
- [ ] 已自测功能
- [ ] 已处理 lint 警告

---

## 🔍 Review 要点

### Code Review 关注点

**代码质量**：
- 代码是否清晰易懂？
- 是否有重复代码？
- 是否遵循最佳实践？

**架构设计**：
- 是否符合整体架构？
- 是否有不必要的耦合？
- 是否考虑了扩展性？

**性能**：
- 是否有性能问题？
- 是否有内存泄漏？
- 是否有不必要的计算？

**安全**：
- 是否有安全漏洞？
- 是否正确处理用户输入？
- 是否有敏感信息泄露？

---

## 📌 注意事项

- PR 应该小而专注，一次只做一件事
- 及时响应 Review 反馈
- 保持 PR 文档更新
- 合并后更新 work-logs
